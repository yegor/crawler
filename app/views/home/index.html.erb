<%= javascript_tag do %>
  if (AC_FL_RunContent == 0 || DetectFlashVer == 0) {
  	alert("This page requires AC_RunActiveContent.js.");
  } else {
  	var hasRightVersion = DetectFlashVer(requiredMajorVersion, requiredMinorVersion, requiredRevision);
  	if(hasRightVersion) { 
  		AC_FL_RunContent(
  			'codebase', 'http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10,0,45,2',
  			'width', '100%',
  			'height', '100%',
  			'scale', 'noscale',
  			'salign', 'TL',
  			'bgcolor', 'white',
  			'wmode', 'opaque',
  			'movie', 'charts',
  			'src', 'charts',
  			'FlashVars', 'library_path=/charts_library&xml_source=<%= chart_data_path(:format => :xml) %>', 
  			'id', 'my_chart',
  			'name', 'my_chart',
  			'menu', 'true',
  			'allowFullScreen', 'true',
  			'allowScriptAccess','sameDomain',
  			'quality', 'high',
  			'align', 'middle',
  			'pluginspage', 'http://www.macromedia.com/go/getflashplayer',
  			'play', 'true',
  			'devicefont', 'true'
  			); 
  	} else { 
  		var alternateContent = 'This content requires the Adobe Flash Player. '
  		+ '<u><a href=http://www.macromedia.com/go/getflash/>Get Flash</a></u>.';
  		document.write(alternateContent); 
  	}
  }
<% end %>